<html>

<head>
    <!-- contain metadata about the html document. metadata is not displayed. metadata typically define the document title, character set, styles, scripts, and other meta information.-->

	<title>Incremental Task</title>

    <!--JS-->

    <!-- external general utilities -->
    <script src="shared/js/jquery-1.11.1.min.js"></script>
    <script src="shared/full-projects/jquery-ui/jquery-ui.min.js"></script>
    <script src="shared/js/underscore-min.js"></script>
    <!-- if you want to draw stuff: -->
    <!-- <script src="shared/js/raphael-min.js"></script> -->

    <!-- cocolab experiment logic -->
    <script src="shared/js/exp-V2.js"></script>
    <script src="shared/js/stream-V2.js"></script>

    <!-- cocolab general utilities -->
    <!--<script src="shared/js/mmturkey.js"></script> */manages submitting data to Mechanical Turk. -->
		<script src="https://proliferate.alps.science/static/js/proliferate.js" type="text/javascript"></script>
    <script src="shared/js/browserCheck.js"></script>
    <script src="shared/js/utils.js"></script>
    <!-- if you want to draw cute creatures (depends on raphael): -->
    <!-- <script src="shared/js/ecosystem.js"></script> -->

    <!-- experiment specific helper functions -->
    <!-- <script src="js/local-utils.js"></script> -->

    <!--CSS-->
    <link href="shared/full-projects/jquery-ui/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
    <link href="shared/css/cocolab-style.css" rel="stylesheet" type="text/css"/>
    <link href="css/local-style.css" rel="stylesheet" type="text/css"/>

	<!-- stimuli file -->
	<script src="js/stimuli.js"></script>

	 <!-- experiment file -->
	<script src="js/index.js"></script>

</head>

<body onload="init();">
	<noscript>This task requires JavaScript.</noscript>

	<div class="slide" id="i0" >
        <p style="margin-top: 100px"><strong>Welcome to our experiment!</strong></p>
	
   <p id="instruct-text">In this experiment, you will see several scenes and you will be asked to play a guessing game. <br> The study should take about 6 minutes. </p> 

	
	  <p><strong>Information</strong></p>
		<div style="text-align:left; max-width:800px; margin:0 auto;">
		<p>
		Thank you for your interest in participating in our research. In the course of this study, we observe how participants process language. We hope the results will provide important scientific insights into the understanding of adult language. This research is carried out by the Leibniz Center for General Linguistics (ZAS). The ZAS is part of a non-profit, humanities research institute of the State of Berlin, Germany, the humanities centers Berlin e.V. The LeibnizDream project was selected for funding by the European Research Council (ERC).
		</p>

		<p>
		We do not expect any risks, inconvenience, or discomfort to result from participation in this study. Participation in this study is completely voluntary. You may stop the experiment at any time. In this case, no data will be collected. Participants are asked to complete tasks using the keyboard, mouse cursor, or touch-screen. In the process, the input (e.g., the selection of an image, the choice of key on your keyboard, or the text entered) and the time of input are stored. All data are collected and stored in accordance with the provisions of the General Data Protection Regulations and the Data Protection Act 2018.
		</p>

		<p>
		If you have questions about the study, contact Chao Sun at chao.sun.13@ucl.ac.uk. The legal basis for processing participant’s data is Article 6 (1) of GDPR.  If you have any doubts about the lawfulness of the processing of your personal data, you can lodge a complaint with the following offices: Data protection officer of the Leibniz Center for General Linguistics: Sabine Gostomski,ecoprotec GmbH, Pamplonastr. 19, 33106 Paderborn, +49 5251 877888-330, gostomski@eco-protec.de
		</p>
		</div>

      <p><strong>Consent</strong></p>
        <!-- <p>Before the experiment can begin, please read this <a href="https://ling-sunc.github.io./scalar-adverbs/ethics/Info_sheet_online_adults.pdf" target="_blank">Information sheet</a> carefully. <br> You can download the copy of the PDF if you want to take a look later.</p> -->

      <div class="consent">
			<ul style="text-align:left;">
		<li>I understand that I have the right to withdraw at any point during the study, for any reason, and without penalty.</li>
		<li>I understand what data will be stored about me.</li>
		<li>I understand that anonymized data may be made publicly available for non-commercial use.</li>
		<li>I have been informed about the legal basis of data processing and the persons responsible in accordance with the GDPR.</li>
		<li>I consent to participate in this study.</li>
		</ul>
			</div>

   		<button id="start_button" type="button">I consent. <br> Start Experiment</button>

    </div>

	<!--Instruction slide-->
	<div class="slide" id="instructions">
  		<h3>Instructions</h3>
		<p>In each trial, you will read a description that unfolds one part at a time while looking at a display. Your task is to guess which object in the display it refers to.</p>

		<p>Each display shows four objects: <br> two beakers and two flasks, each containing water in particular colors. </p>

		<img src="images/instruction_image.png" alt="instructions" style="width:250">

		<p>You will begin with a partial description. To make a guess, click on one of the objects. Each time you click, more words of the description will appear.</p>

		<p>Note: sometimes it will not be possible to know which object the description refers to until the second or third try. In those cases, please select one of the objects so that the description can continue. </p>

		<p>Let's start with some practice. During the practice, you will receive feedback on whether your final click was on the correct object.</p>

		<button onclick="_s.button()">Continue</button>
		
	<div style="display:none;">
		<!-- Beaker images -->
		<img src="images/beaker-cold-green.png" alt="" />
		<img src="images/beaker-cold-orange.png" alt="" />
		<img src="images/beaker-cold-purple.png" alt="" />
		<img src="images/beaker-cool-green.png" alt="" />
		<img src="images/beaker-cool-orange.png" alt="" />
		<img src="images/beaker-cool-purple.png" alt="" />
		<img src="images/beaker-hot-green.png" alt="" />
		<img src="images/beaker-hot-orange.png" alt="" />
		<img src="images/beaker-hot-purple.png" alt="" />
		<img src="images/beaker-warm-green.png" alt="" />
		<img src="images/beaker-warm-orange.png" alt="" />
		<img src="images/beaker-warm-purple.png" alt="" />

		<!-- Flask images -->
		<img src="images/flask-cold-green.png" alt="" />
		<img src="images/flask-cold-orange.png" alt="" />
		<img src="images/flask-cold-purple.png" alt="" />
		<img src="images/flask-cool-green.png" alt="" />
		<img src="images/flask-cool-orange.png" alt="" />
		<img src="images/flask-cool-purple.png" alt="" />
		<img src="images/flask-hot-green.png" alt="" />
		<img src="images/flask-hot-orange.png" alt="" />
		<img src="images/flask-hot-purple.png" alt="" />
		<img src="images/flask-warm-green.png" alt="" />
		<img src="images/flask-warm-orange.png" alt="" />
		<img src="images/flask-warm-purple.png" alt="" />

		<!-- Location marker -->
		<img src="images/loc5.png" alt="" />
	</div>

	</div>

    <!--Practice trial slide-->
	<div class="slide" id="practice">
		<p class="sentence"></p>

		<div class="grid-container">
			<div style="cursor: pointer;" class="loc1 loc" data-loc="AOI1"></div>
			<div style="cursor: pointer;" class="loc2 loc" data-loc="AOI2"></div>
			<div style="cursor: pointer;" class="loc3 loc" data-loc="AOI3"></div>
			<div style="cursor: pointer;" class="loc4 loc" data-loc="AOI4"></div>
            <div class="loc5"></div>
		</div>


        <br><br>
        <p><i>Which object is it referring to?</i></p>
        <div class="err" style="color:blue">Incorrect.<br><br> Please click on the correct object to continue</div>
        <div class="correct" style="color:blue">Correct.<br><br> Please click again to continue.</div>

		<!-- <button onclick="_s.button()">Continue</button> -->
  </div>

 	<div class="slide" id="afterpractice">
		<h3>Great, now we can start the real experiment.</h3>
		<!-- <p>Bla bla bla</p> -->
		<button onclick="_s.button()">Continue</button>
	</div>

	<!--Experimental trial slide-->
  	<div class="slide" id="trial">
		<p class="instruction"></p>

		<div class="grid-container">
			<div style="cursor: pointer;" class="loc1 loc" data-loc="AOI1"></div>
			<div style="cursor: pointer;" class="loc2 loc" data-loc="AOI2"></div>
			<div style="cursor: pointer;" class="loc3 loc" data-loc="AOI3"></div>
			<div style="cursor: pointer;" class="loc4 loc" data-loc="AOI4"></div>
            <div class="loc5"></div>
		</div>

    	<!-- <button onclick="_s.button()">Continue</button> -->

  	</div>


	<div class="slide"  id="subj_info">
	    <div class="long_form">
	      <div class="subj_info_title">Additional information</div>

	      <p class="info">Please answer the following questions.</p>

        <p>What is your Prolific ID?</p>
	      <textarea id="ProlificID" rows="2" cols="50"></textarea>

        <p>Gender:
          <select id="gender">
            <label><option value=""/></label>
            <label><option value="Male"/>Male</label>
            <label><option value="Female"/>Female</label>
            <label><option value="Other"/>Other</label>
          </select>
        </p>

        <p>Age: <input type="text" id="age"/></p>

        <p>Native Language: <input type="text" id="language"/></p>
        <label>(the language(s) spoken at home when you were a child)</label>

	      <p>Did you read the instructions and do you think you did the study correctly?</p>
	      <label><input type="radio"  name="assess" value="No"/>No</label>
	      <label><input type="radio"  name="assess" value="Yes"/>Yes</label>
	      <label><input type="radio"  name="assess" value="Confused"/>I was confused</label>

	      <p>Were there any problems or bugs in the experiment?</p>
	      <textarea id="problems" rows="2" cols="50"></textarea>

	      <p>We would be interested in any comments you have about this experiment. Please type them here:</p>
	      <textarea id="comments" rows="3" cols="50"></textarea>
	      <br/>
	      <button onclick="validateAndSubmit()">Submit</button>

	    </div>
	</div>
	<script>
  function validateAndSubmit() {
    const pid    = document.getElementById('ProlificID')?.value.trim();
    const gender = document.getElementById('gender')?.value;
    const ageStr = document.getElementById('age')?.value.trim();
    const lang   = document.getElementById('language')?.value.trim();
    const assess = document.querySelector('input[name="assess"]:checked');

    const errs = [];

    if (!pid) errs.push('Prolific ID is required.');
    if (!gender) errs.push('Please select your gender.');
    const ageNum = Number(ageStr);
    if (!ageStr || !Number.isInteger(ageNum) || ageNum < 18 || ageNum > 99) {
      errs.push('Please enter a valid age (18–99).');
    }
    if (!lang) errs.push('Native language is required.');
    if (!assess) errs.push('Please answer whether you read the instructions.');

    if (errs.length) {
      alert('Please complete the questionnaire:\n\n' + errs.join('\n'));
      return false; // block submit
    }
    // Everything looks good — proceed with the original submit
    _s.submit();
  }
</script>


	<div id="thanks" class="slide js" >
	    <p  class="big">Thanks for your Time!</p>
	</div>


  	<div class="progress">
    	<span>Progress:</span>
    	<div class="bar-wrapper">
      	<div class="bar" width="0%">
      	</div>
    	</div>
  	</div>


</body>
</html>
